<% layout('layouts/boilerplate') %>

<div class="container mx-auto px-4 py-4 border-2 mt-8">
    <a class="text-2xl" href="/<%= post._id %>"><%= post.title %></a>
    <p><%= post.text %></p>
    <div class="flex justify-end">
        <p>Username</p>
    </div>
    <p>Points: <%= post.upvotes - post.downvotes %></p>
    <form method="POST" action="/<%= post._id %>/upvote">
        <button class="my-2 bg-transparent hover:bg-red-500 text-red-700 font-semibold hover:text-white py-2 px-4 border border-red-500 hover:border-transparent rounded">Upvote</button>
    </form>
    <form method="POST" action="/<%= post._id %>/downvote">
        <button class="my-2 bg-transparent hover:bg-blue-500 text-blue-700 font-semibold hover:text-white py-2 px-4 border border-blue-500 hover:border-transparent rounded">Downvote</button>
    </form>

    <form method="POST" action="/<%= post._id %>">
        <div class="my-6">
            <label for="comment" class="block mb-2 text-sm font-medium text-gray-900 dark:text-gray-300">Post Text</label>
            <textarea required name="comment" id="comment" class="block w-full p-4 text-gray-900 border border-gray-300 rounded-lg bg-gray-50 sm:text-md focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" name="large-input" id="" cols="30" rows="5"></textarea>
        </div>
        <div class="flex justify-center">
            <button class="bg-transparent hover:bg-blue-500 text-blue-700 font-semibold hover:text-white py-2 px-4 border border-blue-500 hover:border-transparent rounded">Post</button>
        </div>
    </form>
</div>

<% for (let comment of post.comments) { %>
<div class="container mx-auto px-4 py-4 border-2 my-8">
    <p><b>Username</b> | <%= comment.upvotes - comment.downvotes %> points</p>
    <p><%= comment.text %></p>

    <a class="inline-block mt-2 bg-transparent hover:bg-blue-500 text-blue-700 font-semibold hover:text-white py-2 px-4 border border-blue-500 hover:border-transparent rounded" href="/<%=post._id%>/<%=comment._id%>">View</a>
</div>
<% } %>
